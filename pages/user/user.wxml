<!--个人中心页面-->
<view class="container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-header">
      <view class="user-avatar-section">
        <image class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        
      </view>
      
      <view class="user-info">
        <view class="user-name">{{userInfo.nickName || '未登录'}}</view>
        <view class="user-level">
          <text class="level-icon">⭐</text>
          <view class="user-stats">
            <text class="level-text">Lv.{{userInfo.level || 1}}</text>
            
          </view>
        </view>
        

      </view>
      
      <view class="user-actions">
        <view class="action-btn edit-btn" bindtap="onEditProfile">
          <text class="action-text">编辑</text>
        </view>

      </view>
    </view>
    
    <!-- 统计数据 -->
    <view class="stats-section">
      <view class="stat-item">
        <text class="stat-number">{{stats.detectionCount}}</text>
        <text class="stat-label">检测次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.diaryCount}}</text>
        <text class="stat-label">日记天数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.reportCount}}</text>
        <text class="stat-label">检测报告</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.favoriteCount}}</text>
        <text class="stat-label">收藏产品</text>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-item" wx:for="{{menuItems}}" wx:key="id" bindtap="onMenuItemTap" data-item="{{item}}">
      <view class="menu-icon" style="background-color: {{item.color}}">{{item.icon}}</view>
      <view class="menu-content">
        <text class="menu-name">{{item.name}}</text>
        <text class="menu-count" wx:if="{{item.count > 0}}">{{item.count}}</text>
      </view>
      <view class="menu-arrow">></view>
    </view>
  </view>

  <!-- 服务项 -->
  <view class="service-section">
    <view class="service-list">
      <view class="service-item" wx:for="{{serviceItems}}" wx:key="id" bindtap="onServiceItemTap" data-item="{{item}}">
        <view class="service-icon">{{item.icon}}</view>
        <text class="service-name">{{item.name}}</text>
        <view class="service-arrow">></view>
      </view>
    </view>
  </view>

  

  <!-- 登录弹窗 -->
  <view class="login-modal" wx:if="{{showLoginModal}}">
    <view class="modal-mask" bindtap="onCloseLoginModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <view class="modal-title">登录</view>
        <view class="modal-close" bindtap="onCloseLoginModal">×</view>
      </view>
      <view class="login-content">
        <button class="login-btn" bindtap="onLogin">微信一键登录</button>
      </view>
    </view>
  </view>
</view>